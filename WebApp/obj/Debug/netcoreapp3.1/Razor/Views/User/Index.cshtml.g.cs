#pragma checksum "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8c15d55fc804eb4c835779b213d40f378e47e550"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_User_Index), @"mvc.1.0.view", @"/Views/User/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\webapplic2\WebApp2\WebApp\Views\_ViewImports.cshtml"
using network2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\webapplic2\WebApp2\WebApp\Views\_ViewImports.cshtml"
using network2.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8c15d55fc804eb4c835779b213d40f378e47e550", @"/Views/User/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1c40a37a932401eb4945e690cd305f7bca89a41f", @"/Views/_ViewImports.cshtml")]
    public class Views_User_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
  
    Layout = "_Layout_Profile";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<style>

.reaction-button {
  font-size: 25px; 
  margin-left: 3%;
  color: #b6b6b6
}

.post-photos {
display: flex;
justify-content: center;
align-items: center; 
margin-bottom: 2%; 
margin-top: 2%;
}

.post-text {
margin-left: 3%;
 margin-bottom: 1.5%; 
 margin-top: 1.5%
}

.post-header {
margin: 3% 3% 0%;
display: flex; 
flex-direction: row;
 align-items: flex-start;
}
.comment-header {
display: flex; 
flex-direction: row;
 align-items: flex-start;
}
</style>

");
#nullable restore
#line 39 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
  
    if (Model.Nickname == User.Identity.Name)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral(@"        <div style=""width: 100%; height: auto; background: #fff; border-radius: 5px; display: flex"">
            <div class=""container flex-column align-items-center justify-content-center"">
                <div class=""form-group"">
                    <textarea placeholder=""Add new post"" class=""form-control"" style=""resize: none; overflow: auto; margin-top: 10px;"" rows=""3"" id=""comment"" name=""text""></textarea>
                </div>
                <button class=""btn btn-primary mb-3"" id=""send-post"">Submit</button>
            </div>
        </div>
");
#nullable restore
#line 50 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div style=\"display: flex; flex-direction: column\">\r\n");
            WriteLiteral("    <div id=\"posts\"></div>\r\n    \r\n</div>\r\n\r\n\r\n<script type=\"text/javascript\">\r\n\r\n    $(document).ready(function() {\r\n   $.ajax({\r\n           url:\'");
#nullable restore
#line 94 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
           Write(Url.Action("GetPostsByUserId", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral("\',\r\n           type: \'GET\',\r\n           data: {\r\n               id: ");
#nullable restore
#line 97 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
              Write(Model.Id);

#line default
#line hidden
#nullable disable
            WriteLiteral(@",
           }
       }).done(function(data) {        
           let ddl = ' ';
                           $.each(data, function(index, element){
                               ddl = PostMakeHTML(element);
                               $(ddl).insertBefore('#posts'); 
                               if(IsPostLikedByUser(element.id)){
                                    $(""#l"" + element.id).css('color', 'red');
                                    $(""#l"" + element.id).removeClass(""like-post"");
                                    $(""#l"" + element.id).addClass(""unlike-post"");
                               }
                               $.ajax({
                                          url:'");
#nullable restore
#line 110 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
                                          Write(Url.Action("GetCommentsByPostId", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                                          type: 'GET',
                                          data: {
                                              postId: element.id,
                                          }
                                      }).done(function(comments) {
                                         $.each(comments, function(index, comment){
                                             ddl = CommentMakeHTML(comment);
                                             $(ddl).insertAfter('#comments-' + element.id); 
                                         }); 
                                      });
                                  
                           });
                           
     })
 });
 
    $(document).on('click', '.like-post', function() {
             $.ajax({
               url:'");
#nullable restore
#line 129 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
               Write(Url.Action("LikeButtonResponse", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
               type:'POST',
               data: {   
                   postId: $(this).data(""id"")
               }
             });
             let v = document.getElementById(""like-post"" + String($(this).data(""id"")));
             v.innerHTML = String(parseInt(v.innerHTML) + 1);
             $(this).css('color', 'red');
             $(this).removeClass(""like-post"");
             $(this).addClass(""unlike-post"");
             
     });
 
    $(document).on('click', '.unlike-post', function() {
             $.ajax({
               url:'");
#nullable restore
#line 145 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
               Write(Url.Action("LikeButtonResponse", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
               type:'POST',
               data: {
                   postId: $(this).data(""id"")
               }
             });
             let v = document.getElementById(""like-post"" + String($(this).data(""id"")));
             v.innerHTML = String(parseInt(v.innerHTML) - 1);
             $(this).css('color', 'gray');
             $(this).removeClass(""unlike-post"");
             $(this).addClass(""like-post"");
        });
    
    $(document).on('click', '#send-post', function() {
                $.ajax({
                  url:'");
#nullable restore
#line 160 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
                  Write(Url.Action("SaveAndReturnPost", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                  type:'POST',
                  data: {
                      text: $('#comment').val()
                  }
                })
                .done(function (data){
                    let ddl = ' ';
                    ddl+=PostMakeHTML(data);
                    $(ddl).insertBefore('#posts');            
                    });
           });
    
    $(document).on('click', '#post-comment', function() {
     let postId = 0;
     let button = $(this);
     postId = button.data(""id"");
                    $.ajax({
                      url:'");
#nullable restore
#line 178 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
                      Write(Url.Action("SaveAndReturnComment", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                      type:'POST',
                      data: {
                          text: $('#comment-' +  button.data(""id"")).val(),
                          postId: button.data(""id"")
                      }
                    })
                    .done(function (data){
                        let ddl = ' ';
                        ddl+=CommentMakeHTML(data);
                        $(ddl).insertBefore('#comments-end-' +  postId); 
                        console.log('#comments-of-' +  postId);
                        let v = document.getElementById(""comments-of-"" + postId);
                        v.innerHTML = "" "" + String(parseInt(v.innerHTML) + 1);
                    });
               });
        
    $(document).on('click', '#delete-post', function() {
        DeletePost($(this).data(""id""));
     });

    let DeletePost = function(id) {
        $.ajax({
        url:'");
#nullable restore
#line 201 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
        Write(Url.Action("DeletePost", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
        type: 'POST',
        data: {
            Id: id
        }
        }).done(function() {
           document.getElementById(""post-"" + id).innerHTML = """";
        })
    };
    
    let IsPostLikedByUser = function(postId){ 
     let result = false;
     $.ajax({
        url:'");
#nullable restore
#line 214 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
        Write(Url.Action("IsLikedByUser", "Post"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
        type: 'GET',
        async: false,
            data:{
                postId: postId
        }
     }).done(function(answer) {
         result = answer;
     });
            
    return result;
 };
 
    let PostMakeHTML = function(data) {
        let ddl = ' '; 
        ddl+='<div id=""post-'+ data.id +'"" style=""width: 100%; border-radius: 2px; margin-top: 2%; background: white"">\n';
        ddl+=           '        <div id=""post-header-'+ data.id +'"" class=""post-header"">\n';
        ddl+=           '          <a href=""");
#nullable restore
#line 231 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
                                       Write(Url.RouteUrl(new { controller = "User", action = "Index", id = 0}));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"' + data.owner.id + '"">'; 
        ddl+=           '            <img src=""' + data.owner.avatarPath + '"" width=""50px"" height=""50px"" style=""border-radius: 50%"">\n';
        ddl+=           '          </a>  ';
        ddl+=           '            <div style=""padding-left: 15px;"">\n';
        ddl+=           '                <div style=""color: #20257c; font-size: 20px;"">\n';
        ddl+=           '                    <a href=""");
#nullable restore
#line 236 "C:\webapplic2\WebApp2\WebApp\Views\User\Index.cshtml"
                                                 Write(Url.RouteUrl(new { controller = "User", action = "Index", id = 0}));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"' + data.owner.id + '"">' + data.owner.nickname + '</a>\n';
        ddl+=           '                </div>\n';
        ddl+=           '                <div style=""color: #b9b9b9"">\n';
        ddl+=           '<a id=""show-post-big"" data-id= ""' + data.id + '"" style=""color: grey;"">' +    ConvertTimeToPostFormat(data.date) + '<\a>';
        ddl+=           '                </div>\n';
        ddl+=           '            </div>\n';
        ddl+=           '            <div id=""post-options-'+ data.id +'"" class=""dropdown"" style=""margin-left: auto; color: #b6b6b6"">\n';
        ddl+=           '                <a class=""dropdown-toggle"" type=""button"" id=""dropdownMenu1"" data-toggle=""dropdown"" aria-haspopup=""true"" aria-expanded=""false""></a>\n';
        ddl+=           '                <div class=""dropdown-menu"" aria-labelledby=""dropdownMenu1"">\n' + 
                        '<input class=""dropdown-item"" data-toggle=""modal"" data-target=""#modalDeletePost"" type=""submit"" value=""Delete""/>';
        ddl+=          ");
            WriteLiteral(@" '                </div>\n';
        ddl+=           '            </div>\n';
        ddl+=           '        </div>\n';
        ddl+=           '        <div id=""post-text-'+ data.id +'"" class=""post-text"">\n';
        ddl+=            data.text;
        ddl+=           '        </div>' +
                        ' <div class=""modal"" id=""modalDeletePost"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalCenteredLabel"" aria-hidden=""true"">\n'+
                          '  <div class=""modal-dialog modal-dialog-centered"" role=""document"">\n'+
                          '    <div class=""modal-content"">\n'+
                          '      <div class=""modal-header"">\n'+
                          '        <h5 class=""modal-title"" id=""exampleModalCenteredLabel"">Delete post</h5>\n'+
                          '        <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">\n'+
                          '          <span aria-hidden=""true"">&times;</span>\n'+
                          ");
            WriteLiteral(@"'        </button>\n'+
                          '      </div>\n'+
                          '      <div class=""modal-body"">\n'+
                          '        Are you sure to delete this post? This operation can\'t be undone.\n'+
                          '      </div>\n'+
                          '      <div class=""modal-footer"">\n'+
                          '        <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"">Close</button>\n'+
                          '        <button type=""button"" id=""delete-post"" data-dismiss=""modal"" data-id=""'+ data.id +'"" class=""btn btn-primary"">Delete</button>\n'+
                          '      </div>\n'+                        
                          '    </div>\n'+
                          '  </div>\n'+
                          '</div> \n';
        ddl+=           '        <div id=""post-photos-'+ data.id +'"" class=""post-photos"">\n';
        ddl+=           '        </div>\n';
        ddl+=           '        <div id=""post-reactio");
            WriteLiteral(@"ns-'+ data.id +'"" style=""margin-bottom: 2%;"">\n';
        ddl+=           '            <i class=""fas fa-heart reaction-button '+ ReturnCSSLikeUnlike(IsPostLikedByUser(data.id), ""post"") +'"" data-id=""' + data.id  + '"" id=""l'+ data.id +'""></i> <a id=""like-post'+ data.id +'"">'+ data.rating +'</a>\n';
        ddl+=           '            <i class=""fas fa-comment reaction-button"" data-id=""' + data.id  + '"" id=""comment""></i><a id=""comments-of-' + data.id + '""> ' + data.commentQuantity +'</a>\n';
        ddl+=           '            <i class=""fas fa-reply reaction-button"" data-id=""' + data.id  + '"" id=""share""></i> ' + data.sharesQuantity + '\n';
        ddl+=           '        </div>\n';
        ddl+=           '<div style=""background: #f5f5f5; \n'+
                              'padding:1%"">\n'+
                        ' <div id=""comments-' + data.id +'"" style=""flex-direction: column;"">' +
                        '</div>' +
                        ' <div id=""comments-end-' + data.id +'"" style=""flex-directi");
            WriteLiteral(@"on: column;"">' +
                                                '</div>' +
                        '   <div style=""display:flex; flex-direction: row; width:100%; align-items: flex-start"">' +
                        '       <textarea placeholder=""Leave a comment...."" class=""form-control"" style="" resize: none"" rows=""1"" id=""comment-'+ data.id +'"" name=""text""></textarea>\n'+
                        '       <button class=""btn btn-primary"" data-id=""' + data.id + '"" style=""margin-bottom: 0;"" id=""post-comment"">Submit</button>\n'+
                        '   </div>   ' +
                        '  </div>';
        ddl+=           '    </div>';       
        
        return ddl;
    };
   
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
